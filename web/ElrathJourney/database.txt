CREATE DATABASE elrath;
CREATE TABLE public.login
(
	id SERIAL PRIMARY KEY NOT NULL,
	user_name VARCHAR(100) NOT NULL UNIQUE,
	password VARCHAR(100) NOT NULL
);
CREATE TABLE public.player
(
	id SERIAL PRIMARY KEY NOT NULL,
	health SMALLINT NOT NULL,
	magic SMALLINT NOT NULL,
	attack SMALLINT NOT NULL,
	defence SMALLINT NOT NULL,
	gold INT
);
CREATE TABLE public.inventory
(
	id SERIAL PRIMARY KEY NOT NULL,
	item_name VARCHAR(100) NOT NULL UNIQUE,
	health_manip INT NOT NULL,
	magic_manip INT NOT NULL,
	attack_manip INT NOT NULL,
	defence_manip INT NOT NULL,
	description TEXT NOT NULL
);
CREATE TABLE public.player_inventory
(
	player_id INT REFERENCES player(id) NOT NULL,
	inventory_id INT REFERENCES inventory(id) NOT NULL
);
CREATE TABLE public.page
(
	id SERIAL PRIMARY KEY NOT NULL,
	story TEXT NOT NULL UNIQUE
);
CREATE TABLE public.storyline
(
	id SERIAL PRIMARY KEY NOT NULL,
	src_page_id INT REFERENCES page(id) NOT NULL,
	next_page_id INT REFERENCES page(id) NOT NULL,
	choice TEXT NOT NULL UNIQUE
);
CREATE TABLE public.game_instance
(
	id SERIAL NOT NULL,
	page_id INT REFERENCES page(id) NOT NULL,
	player_id INT REFERENCES player(id) NOT NULL
);


CREATE USER weblogin WITH PASSWORD 'elrathsJourney';
GRANT USAGE, SELECT ON ALL SEQUENCES IN SCHEMA public TO weblogin;
